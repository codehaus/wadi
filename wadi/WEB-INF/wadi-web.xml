<?xml version="1.0"  encoding="ISO-8859-1"?>

<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure 1.2//EN" "http://jetty.mortbay.org/configure_1_2.dtd">

<Configure class="org.codehaus.wadi.Manager">

 <Set name="ConnectionFactory">
  <New class="org.codehaus.activemq.ActiveMQConnectionFactory">
   <Arg type="String">multicast://224.1.2.3:5123</Arg>
<!--   <Arg type="String">tcp://localhost:61616</Arg> -->
  </New>
 </Set>

<!--
 <Set name="Connection">
  <Call name="getConnectionFactory">
   <Call name="createConnection"/>
  </Call>
 </Set>
-->

<!-- ActiveCluster Cluster component -->
<!--
 <Set name="ClusterFactory">
  <New class="org.codehaus.activecluster.impl.DefaultClusterFactory">
   <Arg>
   </Arg>
  </New>
 </Set>
-->

<!--
 <Set name="Cluster">
  <Arg>
  </Arg>
 </Set>
-->

  <Set name="MigrationService">
    <New class="org.codehaus.wadi.impl.StreamedMigrationService">
      <!--  <New class="org.codehaus.wadi.impl.MessagedMigrationService"/> -->
      <Set name="Timeout">5000</Set>
    </New>
  </Set>

  <!-- used to stream sessions between peers -->
  <Set name="StreamingStrategy">
    <New class="org.codehaus.wadi.impl.SimpleStreamingStrategy"/><!-- no compression -->
  </Set>

  <!-- used to select long-term storage mechanism -->
  <Set name="PassivationStrategy">

    <New class="org.codehaus.wadi.impl.FilePassivationStrategy"><!-- File based persistance -->
      <Arg><SystemProperty name="wadi.home"/>/tmp</Arg><!-- put evicted sessions ${wadi.home}/tmp -->

      <!-- evicted sessions will be gzipped -->
      <Set name="StreamingStrategy">
	<New class="org.codehaus.wadi.impl.GZIPStreamingStrategy"/>
      </Set>
    </New>
  </Set>

  <!-- used to decide when to evict a session -->
  <Set name="EvictionPolicy">
    <New class="org.codehaus.wadi.impl.AbsoluteEvictionPolicy">
      <Arg type="int">300</Arg><!-- evict after 5 mins of inactivity -->
    </New>
  </Set>

  <!-- used to decide how session ids should be generated -->
  <Set name="IdGenerator">
    <New class="org.codehaus.wadi.impl.TomcatIdGenerator"/><!-- use Tomcat style IDs -->
  </Set>

  <!-- Multicast address:port over which session location protocol runs -->
  <Set name="AutoLocationAddress">228.5.6.7</Set>
  <Set name="AutoLocationPort">6789</Set>

<!-- if you are using Apache/mod_jk uncomment this for affinity -->
<!--
  <Set name="RoutingStrategy">
   <New class="org.codehaus.wadi.impl.JkRoutingStrategy">
    <Arg><SystemProperty name="wadi.colour"/></Arg>
   </New>
  </Set>
-->

<!-- else use this... -->
<!--
-->
  <Set name="RoutingStrategy">
   <New class="org.codehaus.wadi.impl.NoRoutingStrategy"/>
  </Set>

</Configure>
