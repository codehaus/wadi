<?xml version="1.0"?>
<document>
    <properties>
        <title>Getting Started with WADI</title>
    </properties>
    <body>
        <section name="Getting Started with WADI">
            <p>
                You can put together a heterogeneous cluster of <a href="./tomcat.html">Tomcat</a>, <a href="./jetty.html">Jetty</a> and <a href="./jboss.html">JBoss</a> instances.
            </p>
            <p>
                If you are using a clustered configuration
                <ol>
                    <li>Download a copy of <a href="http://dist.codehaus.org/activemq/distributions">activemq-3.1-SNAPSHOT</a> - unpack it somewhere</li>
                    <li>Set ACTIVEMQ_HOME to this dir and export it</li>
                    <li>cd $ACTIVEMQ_HOME/bin</li>
                    <li>Start the activemq broker - e.g. 'sh ./activemq'</li>
                    <li>Then
                        <ul>
                            <li>
                                Either:
                                <ol>
                                    <li>download a copy of WADI 2.0-SNAPSHOT - unpack it somewhere</li>
                                    <li>set WADI_HOME to this dir and export it</li>
                                </ol>
                            </li>
                            <li>
                                Or:
                                <ol>
                                    <li>check out the latest WADI src from CVS</li>
                                    <li>Build it</li>
                                    <li>set WADI_HOME to the top of this tree and export it</li>
                                </ol>
                            </li>
                        </ul>        
                    </li>
                    <li>
                    Then run up one <font color="red">red</font> and one <font color="green">green</font> instance of either <a href="./tomcat.html">Tomcat</a>, <a href="./jetty.html">Jetty</a> and <a href="./jboss.html">JBoss</a>.
                    Congratulations, you have started your first (2 node) WADI cluster 
                    </li>
                    <li>Look in $WADI_HOME/conf for the set of node.&lt;colour&gt;.properties files that define the red, green and many other nodes...</li>
                    <li>
                        Point your browser at <font color="red">red</font> - <a href="http://localhost:8080/wadi/create.jsp">http://localhost:8080/wadi/create.jsp</a> - this will create a session, passing back a unique key to the browser.
                        You should see a <font color="red">red</font> page informing you of your session's creation on the <font color="red">red</font> node.
                    </li>
                    <li>
                        Point your browser at <font color="green">green</font> - <a href="http://localhost:8081/wadi/render.jsp">http://localhost:8081/wadi/render.jsp</a> - this will relocate the session from <font color="red">red</font> to <font color="green">green</font> and correctly render the page in the context of its session.
                        You should see a <font color="green">green</font> page with a graphical representation of your session - a single <font color="red">red</font> cell, representing the <font color="red">red</font> node on which the session was created.    
                        Congratulations, you have just survived a loss of session affinity.
                    </li>
                    <li>Shutdown (gently - i.e. ctl-c or some stop script) <font color="green">green</font>, currently hosting your session, this should evacuate the session to the surviving node - <font color="red">red</font>.</li>
                    <li>
                        Point your browser at <font color="red">red</font> - <a href="http://localhost:8080/wadi/render.jsp">http://localhost:8080/wadi/render.jsp</a> - the new location of your session.
                        You should now see your session on a <font color="red">red</font> page. Congratulations, your session just remained active beyond the lifetime of its original host node.    
                    </li>
                </ol>
            </p>
            <p>
                Note:
                <ul>
                    <li><a href="./loadbalancing.html">Setting up a Load Balancer</a> - which demonstrates how to set up a load-balancer over your new cluster.</li>
                    <li><a href="./jmxmonitoring.html">Setting up JMX Monitoring</a> - which describes how to monitor the number of sessions managed by WADI and anything else available via JMX.</li>
                </ul>
            </p>
        </section>
    </body>
</document>
